            echo '@@====Start DNS Processing==master================' ; 			(( echo HELO to Check if ip-172-31-2-84.ap-southeast-1.compute.internal is already working and we skip the rest | curl  -v --max-time 35 --connect-timeout 35   telnet://ip-172-31-2-84.ap-southeast-1.compute.internal:22 2>&1   ) | grep 'Connected to' ) || (				 awk '/ip-172-31-2-84.ap-southeast-1.compute.internal/{ next ;} {print }' /etc/hosts > /etc/hosts.tmp; mv -f  /etc/hosts.tmp /etc/hosts  ;   sudo /opt/puppetlabs/bin/puppet resource host master host_aliases="master.sh.@SPACE@master." ensure=absent ip="13.212.165.245" && sudo cp -f /etc/hosts /tmp/hosts.old && sudo sed -E 's/@SPACE@/ /g' /tmp/hosts.old | sudo tee /etc/hosts ; sudo /opt/puppetlabs/bin/puppet resource host master host_aliases="master.sh.@SPACE@master.@SPACE@ec2-13-212-165-245.ap-southeast-1.compute.amazonaws.com@SPACE@ip-172-31-2-84.ap-southeast-1.compute.internal@SPACE@ip-172-31-2-84.ap-southeast-1.compute.internal" ensure=present ip="13.212.165.245" && sudo cp -f /etc/hosts /tmp/hosts.old && sudo sed -E 's/@SPACE@/ /g' /tmp/hosts.old | sudo tee /etc/hosts ;    (( echo HELO to PrivateIpAddress | curl  -v --max-time 35 --connect-timeout 35   telnet://172.31.2.84:22 2>&1   ) | grep 'Connected to'  &&  sudo /opt/puppetlabs/bin/puppet resource host master host_aliases="master.sh.@SPACE@master.@SPACE@ec2-13-212-165-245.ap-southeast-1.compute.amazonaws.com@SPACE@ip-172-31-2-84.ap-southeast-1.compute.internal@SPACE@ip-172-31-2-84.ap-southeast-1.compute.internal" ensure=present ip="13.212.165.245" && sudo cp -f /etc/hosts /tmp/hosts.old && sudo sed -E 's/@SPACE@/ /g' /tmp/hosts.old | sudo tee /etc/hosts   &&   echo '==Done Setting using PrivateIpAddress IP for master==' ;        echo '==Done Testing PrivateIpAddress IP for master=='  )  ;    (( echo HELO to PublicIpAddress | curl  -v --max-time 35 --connect-timeout 35   telnet://13.212.165.245:22 2>&1   ) | grep 'Connected to'  &&  sudo /opt/puppetlabs/bin/puppet resource host master host_aliases="master.sh.@SPACE@master.@SPACE@ec2-13-212-165-245.ap-southeast-1.compute.amazonaws.com@SPACE@ip-172-31-2-84.ap-southeast-1.compute.internal@SPACE@ip-172-31-2-84.ap-southeast-1.compute.internal" ensure=present ip="13.212.165.245" && sudo cp -f /etc/hosts /tmp/hosts.old && sudo sed -E 's/@SPACE@/ /g' /tmp/hosts.old | sudo tee /etc/hosts   &&   echo '==Done Setting using PublicIpAddress IP for master==' ;        echo '==Done Testing PublicIpAddress IP for master=='  )  ;          			)
		
