1716576333
running sshCMD as =    ssh        -t -e @ -YC =
ssh -t -e @ -YC -R 17722:127.0.0.1:22
================================================================================
Use
$proxy_port =
$PROXYCMD =
/Users/valente/bin/ssh2 -oIdentitiesOnly=yes -i /Users/valente/.ssh/sooyean.awskey -p 22 -l ec2-user 13.212.165.245 -t ( cat /tmp/sethost | sudo bash - ) || ( sudo bash /tmp/sethost ) -o "ProxyCommand corkscrew $proxy_ip_or_domain_name $proxy_port $destination_ip_or_domain_name 22"
================================================================================
================================================================================EXECUTE
                 echo '@@====Start DNS Processing==master================' ; 			(( echo HELO to Check if ip-172-31-2-84.ap-southeast-1.compute.internal is already working and we skip the rest | curl  -v --max-time 35 --connect-timeout 35   telnet://ip-172-31-2-84.ap-southeast-1.compute.internal:22 2>&1   ) | grep 'Connected to' ) || (				 awk '/ip-172-31-2-84.ap-southeast-1.compute.internal/{ next ;} {print }' /etc/hosts > /etc/hosts.tmp; mv -f  /etc/hosts.tmp /etc/hosts  ;   sudo /opt/puppetlabs/bin/puppet resource host master host_aliases="master.sh.@SPACE@master." ensure=absent ip="13.212.165.245" && sudo cp -f /etc/hosts /tmp/hosts.old && sudo sed -E 's/@SPACE@/ /g' /tmp/hosts.old | sudo tee /etc/hosts ; sudo /opt/puppetlabs/bin/puppet resource host master host_aliases="master.sh.@SPACE@master.@SPACE@ec2-13-212-165-245.ap-southeast-1.compute.amazonaws.com@SPACE@ip-172-31-2-84.ap-southeast-1.compute.internal@SPACE@ip-172-31-2-84.ap-southeast-1.compute.internal" ensure=present ip="13.212.165.245" && sudo cp -f /etc/hosts /tmp/hosts.old && sudo sed -E 's/@SPACE@/ /g' /tmp/hosts.old | sudo tee /etc/hosts ;    (( echo HELO to PrivateIpAddress | curl  -v --max-time 35 --connect-timeout 35   telnet://172.31.2.84:22 2>&1   ) | grep 'Connected to'  &&  sudo /opt/puppetlabs/bin/puppet resource host master host_aliases="master.sh.@SPACE@master.@SPACE@ec2-13-212-165-245.ap-southeast-1.compute.amazonaws.com@SPACE@ip-172-31-2-84.ap-southeast-1.compute.internal@SPACE@ip-172-31-2-84.ap-southeast-1.compute.internal" ensure=present ip="13.212.165.245" && sudo cp -f /etc/hosts /tmp/hosts.old && sudo sed -E 's/@SPACE@/ /g' /tmp/hosts.old | sudo tee /etc/hosts   &&   echo '==Done Setting using PrivateIpAddress IP for master==' ;        echo '==Done Testing PrivateIpAddress IP for master=='  )  ;    (( echo HELO to PublicIpAddress | curl  -v --max-time 35 --connect-timeout 35   telnet://13.212.165.245:22 2>&1   ) | grep 'Connected to'  &&  sudo /opt/puppetlabs/bin/puppet resource host master host_aliases="master.sh.@SPACE@master.@SPACE@ec2-13-212-165-245.ap-southeast-1.compute.amazonaws.com@SPACE@ip-172-31-2-84.ap-southeast-1.compute.internal@SPACE@ip-172-31-2-84.ap-southeast-1.compute.internal" ensure=present ip="13.212.165.245" && sudo cp -f /etc/hosts /tmp/hosts.old && sudo sed -E 's/@SPACE@/ /g' /tmp/hosts.old | sudo tee /etc/hosts   &&   echo '==Done Setting using PublicIpAddress IP for master==' ;        echo '==Done Testing PublicIpAddress IP for master=='  )  ;          			)
		
@@====Start DNS Processing==master================
* Connected to ip-172-31-2-84.ap-southeast-1.compute.internal (172.31.2.84) port 22 (#0)
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
